{"id":"d8afbb43-507a-43f2-a62b-7be151e7f978","title":"Event Loop","mindmap":{"root":{"id":"45573428-0988-4607-8718-17f0fdac3ab1","parentId":null,"text":{"caption":"Event Loop","font":{"style":"normal","weight":"bold","decoration":"none","size":20,"color":"#000000"}},"offset":{"x":0,"y":0},"foldChildren":false,"branchColor":"#000000","children":[{"id":"16246a31-f899-475e-8ce1-16bcf75e73c8","parentId":"45573428-0988-4607-8718-17f0fdac3ab1","text":{"caption":"Why?","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-5,"y":-127},"foldChildren":false,"branchColor":"#987b93","children":[{"id":"13333efb-4e54-49dc-a32f-c3d5994b4ff1","parentId":"16246a31-f899-475e-8ce1-16bcf75e73c8","text":{"caption":"One of the most important aspects to understand about NodeJS","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":168,"y":-187},"foldChildren":false,"branchColor":"#987b93","children":[]},{"id":"935893e8-e267-45ec-ac64-6066af842a71","parentId":"16246a31-f899-475e-8ce1-16bcf75e73c8","text":{"caption":"Killer Feature of NodeJS","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":169,"y":-89},"foldChildren":false,"branchColor":"#987b93","children":[]},{"id":"400abb19-40d2-4b96-bbe9-c4bd6984e81e","parentId":"16246a31-f899-475e-8ce1-16bcf75e73c8","text":{"caption":"Explains how JS can be asynchronous and have non-blocking I/O with one thread","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":189,"y":-26},"foldChildren":false,"branchColor":"#987b93","children":[]},{"id":"69d9c115-bec5-4b53-8ca8-bd498d621fde","parentId":"16246a31-f899-475e-8ce1-16bcf75e73c8","text":{"caption":"AVOID BLOCK THE MAIN THREAD","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":173,"y":-246},"foldChildren":false,"branchColor":"#987b93","children":[]}]},{"id":"a07e8662-e728-4c11-b204-53fd88ee3ea0","parentId":"45573428-0988-4607-8718-17f0fdac3ab1","text":{"caption":"What?","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-107,"y":-63},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"4c6de2bb-1d06-4346-b4a3-82198ea03253","parentId":"a07e8662-e728-4c11-b204-53fd88ee3ea0","text":{"caption":"JS runs in a single thread","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-192,"y":-42},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"b924e508-3578-434c-972a-1c0a6447c222","parentId":"4c6de2bb-1d06-4346-b4a3-82198ea03253","text":{"caption":"simplifies a lot how you program without worrying about concurrency issues","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-158,"y":-103},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"d39581f7-dc0f-449b-88eb-0163a8adb20e","parentId":"b924e508-3578-434c-972a-1c0a6447c222","text":{"caption":"Just, don't block the thread","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-156,"y":-37},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"c065cc21-4436-4ab1-8cdb-8000c6d6a3cb","parentId":"d39581f7-dc0f-449b-88eb-0163a8adb20e","text":{"caption":"return back control to the event loop fast","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-167,"y":-32},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"a30b97df-ddd4-4d48-9c4d-cf47faaf2977","parentId":"d39581f7-dc0f-449b-88eb-0163a8adb20e","text":{"caption":"if you block the main thread, even block the UI thread, and the user cannot click around, scroll the page, and so on","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-183,"y":40},"foldChildren":false,"branchColor":"#c6f297","children":[]}]}]},{"id":"5f6bf261-b0e5-4c78-99f9-a02953925be7","parentId":"4c6de2bb-1d06-4346-b4a3-82198ea03253","text":{"caption":"An EventLoop for browser tab","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-188,"y":3},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"2d7508e6-1220-46e3-bd9b-406b6548bda1","parentId":"4c6de2bb-1d06-4346-b4a3-82198ea03253","text":{"caption":"The environment manages multiple concurrent event loops, to handle API calls for example. Web Workers run in their own event loop as well","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-256,"y":72},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"418b76f9-6206-42ef-a39f-a6585e832046","parentId":"2d7508e6-1220-46e3-bd9b-406b6548bda1","text":{"caption":"Almost all the I/O primitives in JavaScript are non-blocking: callbacks, promises, async/await","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-191,"y":77},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"fa8bbe00-ff68-4958-bd58-49667a8f0702","parentId":"418b76f9-6206-42ef-a39f-a6585e832046","text":{"caption":"Network requests","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-132,"y":114},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"400b544f-f0d4-4928-adc0-674491774f10","parentId":"418b76f9-6206-42ef-a39f-a6585e832046","text":{"caption":"filesystem operations","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-169,"y":81},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"b47378e8-91ac-482b-b9e3-6e0a08992b6a","parentId":"418b76f9-6206-42ef-a39f-a6585e832046","text":{"caption":"database access","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-158,"y":41},"foldChildren":false,"branchColor":"#c6f297","children":[]}]}]},{"id":"e19410fc-42b5-4ee2-95aa-3db189bd6ec6","parentId":"4c6de2bb-1d06-4346-b4a3-82198ea03253","text":{"caption":"Worker thread pools","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-143,"y":-162},"foldChildren":false,"branchColor":"#c6f297","children":[]}]},{"id":"48b48e91-925d-4042-afe0-586463cedfdf","parentId":"a07e8662-e728-4c11-b204-53fd88ee3ea0","text":{"caption":"It has the order, what is the next task to get in the single thread (Queues are grouping is 2 main types)","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-178,"y":212},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"6f950dd8-cc27-444d-b566-21db02c62dc7","parentId":"48b48e91-925d-4042-afe0-586463cedfdf","text":{"caption":"1) CALL STACK","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-163,"y":-10},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"1716cd92-565b-4fe6-9240-674eb57fe251","parentId":"6f950dd8-cc27-444d-b566-21db02c62dc7","text":{"caption":"LIFO","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-174,"y":6},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"0e84791c-4ec6-4ee1-bdb7-6c6dc7819253","parentId":"6f950dd8-cc27-444d-b566-21db02c62dc7","text":{"caption":"save the calls to functions","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-194,"y":45},"foldChildren":false,"branchColor":"#c6f297","children":[]}]},{"id":"74bb8632-f3c8-42e5-a40a-f2098d601644","parentId":"48b48e91-925d-4042-afe0-586463cedfdf","text":{"caption":"2) Job Queue","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-145,"y":82},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"23e391a7-a1e6-42bd-8723-98f36174214b","parentId":"74bb8632-f3c8-42e5-a40a-f2098d601644","text":{"caption":"microtasks are executed before running the next macrotask","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-219,"y":18},"foldChildren":false,"branchColor":"#c6f297","children":[]}]},{"id":"6979d2e9-f7a2-45a6-b7f4-336eeddf3564","parentId":"48b48e91-925d-4042-afe0-586463cedfdf","text":{"caption":"3) Message Queue","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-153,"y":195},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"a956563c-9832-486c-8f41-b156b6a76489","parentId":"6979d2e9-f7a2-45a6-b7f4-336eeddf3564","text":{"caption":"macrotasks are executed when stack is empty","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-196,"y":2},"foldChildren":false,"branchColor":"#c6f297","children":[]}]}]},{"id":"cc0b128a-4a3c-4561-9f78-6d639cb91dee","parentId":"a07e8662-e728-4c11-b204-53fd88ee3ea0","text":{"caption":"it is like a ToDo list, a scheduler for the main thread","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-178,"y":-276},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"8a04867b-93f3-436e-a0e8-1b848b558716","parentId":"cc0b128a-4a3c-4561-9f78-6d639cb91dee","text":{"caption":"This TODO list, in fact, consists of set of queues","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-196,"y":-32},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"dd8f925e-c3e1-434e-961e-24a610160d4f","parentId":"8a04867b-93f3-436e-a0e8-1b848b558716","text":{"caption":"NodeJS event loop has different phases and each phase has a FIFO queue","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-220,"y":-10},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"9109cd39-1a4b-48a6-8cf2-c2be59eb8a44","parentId":"dd8f925e-c3e1-434e-961e-24a610160d4f","text":{"caption":"Processing of each event is called a Tick","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-201,"y":9},"foldChildren":false,"branchColor":"#c6f297","children":[]}]}]},{"id":"a38b6efb-a967-4bd3-b1cc-ccd9943cd7fd","parentId":"cc0b128a-4a3c-4561-9f78-6d639cb91dee","text":{"caption":"It's not a process, it's most like a data structure. Not run in the single thread, because it's a ToDo","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-209,"y":-146},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","parentId":"a38b6efb-a967-4bd3-b1cc-ccd9943cd7fd","text":{"caption":"This TODO list, in fact, consists of set of queues; each one being for a specific purpose","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-226,"y":-18},"foldChildren":false,"branchColor":"#c6f297","children":[{"id":"63f1f9a1-82db-42da-b23d-88be61967a73","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Timers","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-150,"y":-124},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"9b0896ac-fa83-4346-92a0-6a926534d279","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Pending Callbacks","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-198,"y":-78},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"c051cb90-1b8d-4e34-b3fe-459eacfefc6c","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Idle and Prepare","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-183,"y":-43},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"2537ff9a-a6f9-483a-b615-0a1cbdfc3cfc","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Poll","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-178,"y":-11},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"8128050c-a43c-4aad-9117-d01fc2bf9842","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Check","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-172,"y":30},"foldChildren":false,"branchColor":"#c6f297","children":[]},{"id":"4a167f3d-a768-460c-9882-1c518c6dfd09","parentId":"d82beb63-f0b8-4de9-8fe8-95e3b254afd1","text":{"caption":"Close Callbacks","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-173,"y":73},"foldChildren":false,"branchColor":"#c6f297","children":[]}]}]}]}]},{"id":"ed70802e-9012-47c8-96eb-40eb63ae09cf","parentId":"45573428-0988-4607-8718-17f0fdac3ab1","text":{"caption":"How?","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":-78,"y":83},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"26a1c33e-a778-4e38-b9ec-bb93997b72e1","parentId":"ed70802e-9012-47c8-96eb-40eb63ae09cf","text":{"caption":"microtasks","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":246,"y":7},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"7cf4c7b7-3475-46ac-a603-77f35f4cae2a","parentId":"26a1c33e-a778-4e38-b9ec-bb93997b72e1","text":{"caption":"process.nextTick()","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":95,"y":152},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"3c909c26-76b4-47a1-a729-7ee8295fe927","parentId":"7cf4c7b7-3475-46ac-a603-77f35f4cae2a","text":{"caption":"within the JobQueue the process.nextTick has a higher priority over the promise registered tasks","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":156,"y":28},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]},{"id":"acaf11bb-5ef6-4023-a76c-f53092188581","parentId":"26a1c33e-a778-4e38-b9ec-bb93997b72e1","text":{"caption":"Promises.resolve","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":75,"y":266},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"b2b34a32-5774-4d93-83f4-f106de712229","parentId":"acaf11bb-5ef6-4023-a76c-f53092188581","text":{"caption":"schedule microtasks","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":166,"y":13},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"578f94e2-8a67-4375-9961-56789ce2d6d4","parentId":"b2b34a32-5774-4d93-83f4-f106de712229","text":{"caption":"introduced by ECMAScript 2015","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":155,"y":-7},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"296991cd-c18a-4594-9f72-3bc6607830e5","parentId":"578f94e2-8a67-4375-9961-56789ce2d6d4","text":{"caption":"It“s a way to execute the result of an async function as soon as possible, rather than being put at the end of the call stack","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":189,"y":-45},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]}]}]}]},{"id":"4d56ccd0-0a31-4c90-9ed1-17811b9abb00","parentId":"ed70802e-9012-47c8-96eb-40eb63ae09cf","text":{"caption":"macrotasks","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":259,"y":-83},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"673ae488-8b2e-4b4f-8b29-e637ab95d615","parentId":"4d56ccd0-0a31-4c90-9ed1-17811b9abb00","text":{"caption":"timers","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":120,"y":-62},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"a45099e3-f95f-4599-921f-68385e5c111b","parentId":"673ae488-8b2e-4b4f-8b29-e637ab95d615","text":{"caption":"id = setTimeout(() => {...}, 0)","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":147,"y":-41},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"a5228607-a5e3-43db-8c11-5c1d7c5c7b01","parentId":"a45099e3-f95f-4599-921f-68385e5c111b","text":{"caption":"clearTimeout(id)","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":197,"y":-30},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]},{"id":"e09aabea-e954-485a-9600-3c19455f439c","parentId":"673ae488-8b2e-4b4f-8b29-e637ab95d615","text":{"caption":"setInterval()","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":187,"y":22},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"651d575b-aae7-43cc-a63a-8b7608dafbdb","parentId":"e09aabea-e954-485a-9600-3c19455f439c","text":{"caption":"clearInterval(id)","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":165,"y":-47},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]}]},{"id":"44ea226f-a54f-4c58-b21b-36dea6a05f4f","parentId":"4d56ccd0-0a31-4c90-9ed1-17811b9abb00","text":{"caption":"using the browser/nodeJS API","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":128,"y":8},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"31e81e6a-14ab-415a-adf4-67cb9fe7b623","parentId":"44ea226f-a54f-4c58-b21b-36dea6a05f4f","text":{"caption":"We don“t have to wait for functions like setTimeout, fetch or other things to do their own work, because they are provided by the APIs (browser or Node), they live on their own thread","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":215,"y":5},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"2b18b33c-4702-43d1-8b1e-64518812980e","parentId":"31e81e6a-14ab-415a-adf4-67cb9fe7b623","text":{"caption":"the event loop is something that embedders should have control over","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":177,"y":42},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]},{"id":"75b13522-50b7-4071-a0c9-919c2f8570b4","parentId":"44ea226f-a54f-4c58-b21b-36dea6a05f4f","text":{"caption":"schedule macrotasks","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":194,"y":197},"foldChildren":false,"branchColor":"#ed5f22","children":[{"id":"61fcd850-61c5-4189-a8b5-3b2e04ee7172","parentId":"75b13522-50b7-4071-a0c9-919c2f8570b4","text":{"caption":"events like click, keyboard, fetch are macrotasks too","font":{"weight":"normal","style":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":172,"y":-42},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]}]},{"id":"d4ee3985-655d-4168-a752-528964c415d1","parentId":"4d56ccd0-0a31-4c90-9ed1-17811b9abb00","text":{"caption":"setImmediate = setTimeout(..., 0)","font":{"style":"normal","weight":"normal","decoration":"none","size":15,"color":"#000000"}},"offset":{"x":116,"y":103},"foldChildren":false,"branchColor":"#ed5f22","children":[]}]}]}]}},"dates":{"created":1650558440670,"modified":1651637352011},"dimensions":{"x":4000,"y":2000},"autosave":true}